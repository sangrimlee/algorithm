---
title: Trapping Rain Water
tags:
  - Array
  - Two Pointers
  - Dynamic Programming
  - Stack
  - Monotonic Stack
---

# 42. Trapping Rain Water

<Badge.Root>
  <Badge.Level level="hard" />
  <Badge.Topic name="Array" slug="array" />
  <Badge.Topic name="Two Pointers" slug="two-pointers" />
  <Badge.Topic name="Dynamic Programming" slug="dynamic-programming" />
  <Badge.Topic name="Stack" slug="stack" />
  <Badge.Topic name="Monotonic Stack" slug="monotonic-stack" />
</Badge.Root>

## Solution

```typescript filename="solution.ts" copy
export function trap(height: number[]): number {
  const n = height.length;
  if (n <= 2) {
    return 0;
  }

  let answer = 0;
  let [left, right] = [1, n - 2];
  let maxLeftHeight = height[0];
  let maxRightHeight = height[n - 1];
  while (left <= right) {
    if (maxLeftHeight < maxRightHeight) {
      maxLeftHeight = Math.max(maxLeftHeight, height[left]);
      answer += maxLeftHeight - height[left];
      left += 1;
    } else {
      maxRightHeight = Math.max(maxRightHeight, height[right]);
      answer += maxRightHeight - height[right];
      right -= 1;
    }
  }
  return answer;
}
```

<ProblemLink
  codingSite="leetcode"
  href="https://leetcode.com/problems/trapping-rain-water"
  title="Trapping Rain Water"
/>
