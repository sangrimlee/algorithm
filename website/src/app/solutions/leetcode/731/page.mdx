---
title: My Calendar II
tags:
  - Array
  - Binary Search
  - Design
  - Segment Tree
  - Prefix Sum
  - Ordered Set
---

# 731. My Calendar II

<Badges>
  <LevelBadge level="medium" />
  <TopicBadge name="Array" slug="array" />
  <TopicBadge name="Binary Search" slug="binary-search" />
  <TopicBadge name="Design" slug="design" />
  <TopicBadge name="Segment Tree" slug="segment-tree" />
  <TopicBadge name="Prefix Sum" slug="prefix-sum" />
  <TopicBadge name="Ordered Set" slug="ordered-set" />
</Badges>

## Solution

```typescript filename="solution.ts" copy
export class MyCalendarTwo {
  private readonly bookings: [number, number][];
  private readonly doubleBookings: [number, number][];

  constructor() {
    this.bookings = [];
    this.doubleBookings = [];
  }

  book(start: number, end: number): boolean {
    for (const booking of this.doubleBookings) {
      if (Math.max(start, booking[0]) < Math.min(end, booking[1])) {
        return false;
      }
    }

    for (const booking of this.bookings) {
      if (Math.max(start, booking[0]) < Math.min(end, booking[1])) {
        this.doubleBookings.push([Math.max(start, booking[0]), Math.min(end, booking[1])]);
      }
    }
    this.bookings.push([start, end]);
    return true;
  }
}
```

### Complexity

- Time: `O(N)`
- Space: `O(N)`

<ProblemLink
  codingSite="leetcode"
  href="https://leetcode.com/problems/my-calendar-ii"
  title="My Calendar II"
/>
