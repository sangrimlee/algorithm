---
id: '2444'
title: Count Subarrays With Fixed Bounds
category: Algorithms
difficulty: Hard
tags:
  - Array
  - Queue
  - Sliding Window
  - Monotonic Queue
url: https://leetcode.com/problems/count-subarrays-with-fixed-bounds
---

## ë¬¸ì œ ì„¤ëª…

- ì •ìˆ˜ ë°°ì—´ `nums`ì™€ ë‘ ì •ìˆ˜ `minK`, `maxK`ê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤.
- **"fixed-bound subarray"** ëŠ” ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë¶€ë¶„ ë°°ì—´ì…ë‹ˆë‹¤.
  - ë¶€ë¶„ ë°°ì—´ì˜ ìµœì†Ÿê°’ì´ ì •í™•íˆ `minK`ì…ë‹ˆë‹¤.
  - ë¶€ë¶„ ë°°ì—´ì˜ ìµœëŒ“ê°’ì´ ì •í™•íˆ `maxK`ì…ë‹ˆë‹¤.
- **"fixed-bound subarray"** ì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.

## ë¬¸ì œ í’€ì´

### `Sliding Window`

> ğŸ’¡ ì•„ì´ë””ì–´
>
> **fixed-bound subarray**ì˜ ì¡°ê±´ì„ ë‹¤ìŒê³¼ ê°™ì´ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
> - `minK`ë³´ë‹¤ ì‘ê±°ë‚˜, `maxK`ë³´ë‹¤ í° ê°’ì„ ê°€ì§€ë©´ ì•ˆë©ë‹ˆë‹¤.
> - `minK`ì™€ `maxK`ì˜ ê°’ì„ ê°€ì§€ê³  ìˆì–´ì•¼í•©ë‹ˆë‹¤.

1. ë°°ì—´ì„ ìˆœì°¨ì ìœ¼ë¡œ ìˆœíšŒí•©ë‹ˆë‹¤
2. ë²”ìœ„ ë°–ì˜ ê°’(`num < minK || num > maxK`) ë°œê²¬ì‹œ ìœˆë„ìš° ì¬ì„¤ì •í•©ë‹ˆë‹¤.
3. `minK`ì™€ `maxK` ë°œê²¬ ì‹œ ê°ê°ì˜ ë§ˆì§€ë§‰ ìœ„ì¹˜ë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤.
4. í˜„ì¬ ìœˆë„ìš° ë‚´ì— `minK`ì™€ `maxK` ëª¨ë‘ ì¡´ì¬í•˜ë©´ ë‹¤ìŒì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
   - **ê°€ëŠ¥í•œ ë¶€ë¶„ ë°°ì—´ ê°œìˆ˜ = `Math.min(lastMinIndex, lastMaxIndex) - start + 1`**
   - **í˜„ì¬ ìœˆë„ìš°ì—ì„œ `minK`ì™€ `maxK`ë¥¼ ëª¨ë‘ í¬í•¨í•˜ë©´ì„œ ê°€ëŠ¥í•œ ì‹œì‘ì ì˜ ê°œìˆ˜**ì™€ ê°™ìŠµë‹ˆë‹¤.

```typescript showLineNumbers
export function countSubarrays(nums: number[], minK: number, maxK: number): number {
  const n = nums.length;

  let answer = 0;
  let start = 0;
  let lastMinIndex = -1;
  let lastMaxIndex = -1;
  for (let i = 0; i < n; i++) {
    const num = nums[i];
    if (num < minK || num > maxK) {
      start = i + 1;
    }
    if (num === maxK) {
      lastMaxIndex = i;
    }
    if (num === minK) {
      lastMinIndex = i;
    }
    if (start <= lastMinIndex && start <= lastMaxIndex) {
      answer += Math.min(lastMinIndex, lastMaxIndex) - start + 1;
    }
  }
  return answer;
}
```

#### ë³µì¡ë„

- ì‹œê°„ ë³µì¡ë„: $O(n)$
- ê³µê°„ ë³µì¡ë„: $O(1)$
