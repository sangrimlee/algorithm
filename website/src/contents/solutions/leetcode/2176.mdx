---
id: '2176'
title: Count Equal and Divisible Pairs in an Array
url: https://leetcode.com/problems/count-equal-and-divisible-pairs-in-an-array
category: Algorithms
difficulty: Easy
tags:
  - Array
---

## ë¬¸ì œ ì„¤ëª…

- ê¸¸ì´ê°€ `n`ì¸ ì •ìˆ˜ ë°°ì—´ `nums`ì™€ ì •ìˆ˜ `k`ê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤.
- ì•„ë˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” **ìŒ(i, j)ì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜**í•´ì•¼ í•©ë‹ˆë‹¤.
  1. `0 <= i < j < n`
  2. `nums[i] === nums[j]`
  3. `(i * j) % k === 0`

## ë¬¸ì œ í’€ì´

### `Brute Force`

> ğŸ’¡ ì•„ì´ë””ì–´
>
> **`n`ì˜ ìµœëŒ€ í¬ê¸°ëŠ” 100**ìœ¼ë¡œ, $O(n^2)$ ì‹œê°„ì´ ê±¸ë ¤ë„ í¬ê²Œ ë¬¸ì œê°€ ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ, **ì™„ì „ íƒìƒ‰ì„ í†µí•´ ëª¨ë“  ìŒì„ íƒìƒ‰í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆë‹¤.**

1. ë°°ì—´ì˜ ëª¨ë“  ê°€ëŠ¥í•œ ì¸ë±ìŠ¤ ìŒ `(i, j)` (`0 <= i < j < n`)ë¥¼ **ì´ì¤‘ ë£¨í”„**ë¡œ íƒìƒ‰í•©ë‹ˆë‹¤.
2. ê° ìŒì— ëŒ€í•´ ë‘ ê°€ì§€ ì¡°ê±´ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.
   - `nums[i] === nums[j]` â†’ ê°’ì´ ê°™ì€ì§€ í™•ì¸
   - `(i * j) % k === 0` â†’ ì¸ë±ìŠ¤ ê³±ì´ `k`ë¡œ ë‚˜ëˆ„ì–´ ë–¨ì–´ì§€ëŠ”ì§€ í™•ì¸
3. ë‘ ì¡°ê±´ì„ ëª¨ë‘ ë§Œì¡±í•˜ë©´ ì •ë‹µ(`answer`)ë¥¼ 1 ì¦ê°€ì‹œí‚µë‹ˆë‹¤.

```typescript showLineNumbers
export function countPairs(nums: number[], k: number): number {
  const n = nums.length;

  let answer = 0;
  for (let i = 0; i < n; i++) {
    for (let j = i + 1; j < n; j++) {
      if (nums[i] === nums[j] && (i * j) % k === 0) {
        answer += 1;
      }
    }
  }
  return answer;
}
```

#### ë³µì¡ë„

- ì‹œê°„ ë³µì¡ë„: $O(n^2)$
- ê³µê°„ ë³µì¡ë„: $O(1)$

---

### `Hash Table and GCD`

> ğŸ’¡ ì•„ì´ë””ì–´
>
> 1. `(i * j) % k === 0`ì„ `gcd(i, k) * gcd(j, k) % k === 0`ìœ¼ë¡œ ë°”ê¿”ì„œ ìƒê°í•œë‹¤.
> 2. `i`ì˜ GCD ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ, ì´ì „ì— ë“±ì¥í•œ `j`ë“¤ì˜ GCD ê°’ì„ ëª¨ì•„ë†“ê³  ë¹„êµí•œë‹¤.
> 3. ëª¨ë“  `(i, j)`ë¥¼ ìˆœíšŒí•˜ì§€ ì•Šê³ ë„ íš¨ìœ¨ì ìœ¼ë¡œ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìŒì„ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤.
> 4. ê°€ëŠ¥í•œ GCD ê°’ì€ `k`ì˜ ì•½ìˆ˜ë§Œí¼ë§Œ ì¡´ì¬í•˜ë¯€ë¡œ, ë¹„êµ ëŒ€ìƒì€ $O(\sqrt{k})$ê°œë¡œ ì œí•œëœë‹¤.

1. **ê°™ì€ ê°’ì„ ê°€ì§„ ì¸ë±ìŠ¤ë¥¼ ê·¸ë£¹í™”**í•©ë‹ˆë‹¤.
2. ê°™ì€ ê°’ì„ ê° ì¸ë±ìŠ¤ì— ëŒ€í•´:
   - í˜„ì¬ ì¸ë±ìŠ¤ `i`ì˜ `gcd(i, k)`ì™€ ì´ì „ ì¸ë±ìŠ¤ì˜ GCD `gcd(j, k)`ì™€ ë¹„êµí•©ë‹ˆë‹¤.
   - ë§Œì•½, `gcd(i, k) * gcd(j,k) % k === 0`ì´ë©´ ì •ë‹µ (`answer`)ë¥¼ 1 ì¦ê°€ì‹œí‚µë‹ˆë‹¤.

```typescript showLineNumbers
export function countPairs(nums: number[], k: number): number {
  const indicesByNum = new Map<number, number[]>();
  nums.forEach((num, i) => {
    const indices = indicesByNum.get(num) ?? [];
    indices.push(i);
    indicesByNum.set(num, indices);
  });

  let answer = 0;
  for (const indices of indicesByNum.values()) {
    const gcdCount = new Map<number, number>();
    for (const i of indices) {
      const gcdI = gcd(i, k);
      for (const [gcdJ, count] of gcdCount) {
        if ((gcdI * gcdJ) % k === 0) {
          answer += count;
        }
      }
      gcdCount.set(gcdI, (gcdCount.get(gcdI) ?? 0) + 1);
    }
  }
  return answer;
}

function gcd(a: number, b: number): number {
  return b === 0 ? a : gcd(b, a % b);
}
```

#### ë³µì¡ë„

- ì‹œê°„ ë³µì¡ë„: $O(n \cdot \sqrt{k})$
  - **`k`ì˜ ì•½ìˆ˜ì˜ ìµœëŒ€ ê°œìˆ˜ëŠ” $\sqrt{k}$ ê°œì´ë‹¤.**
  - ì „ì²´ì ìœ¼ë¡œ **ëª¨ë“  ì¸ë±ìŠ¤ë¥¼ í•œ ë²ˆì”© ë°©ë¬¸í•˜ë©´ì„œ, ê° ì¸ë±ìŠ¤ì— ëŒ€í•´ ì•½ìˆ˜ì˜ ìˆ˜ ì •ë„ì˜ GCD ë¹„êµë¥¼ ìˆ˜í–‰**í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.
- ê³µê°„ ë³µì¡ë„: $O(n+\sqrt{k})$
  - `indicesByNum`: $O(n)$
  - `gcdCount`: $O(\sqrt{k})$
