---
id: '2537'
title: Count the Number of Good Subarrays
url: https://leetcode.com/problems/count-the-number-of-good-subarrays
category: Algorithms
difficulty: Medium
tags:
  - Array
  - Hash Table
  - Sliding Window
---

## ë¬¸ì œ ì„¤ëª…

- ì •ìˆ˜ ë°°ì—´ `nums`ì™€ ì •ìˆ˜ `k`ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, **Good Subarrayì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜**í•´ì•¼ í•©ë‹ˆë‹¤.
- **Good Subarrayë€?**
  - `nums`ì˜ ì–´ë–¤ ë¶€ë¶„ ë°°ì—´ `arra`ê°€ ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ **Good Subarray**ì…ë‹ˆë‹¤.
  - ì•„ë˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” **ì ì–´ë„ `k`ê°œì˜ (i, j) ìŒì´ ì¡´ì¬**í•´ì•¼ í•©ë‹ˆë‹¤.
    - `i < j`
    - `arr[i] === arr[j]`
  - **ì¦‰, ë¶€ë¶„ ë°°ì—´ ë‚´ì— ê°’ì´ ê°™ì€ ì¸ë±ìŠ¤ ìŒì´ `k`ê°œ ì´ìƒ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤.**

## ë¬¸ì œ í’€ì´

### `Sliding Window`

> ğŸ’¡ ì•„ì´ë””ì–´
>
> 1. ìŒì˜ ê°œìˆ˜ëŠ” **ì¶”ê°€ë˜ëŠ” ìˆ«ìì˜ ê¸°ì¡´ ê°œìˆ˜**ë¡œ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤.
> 2. **ìŠ¬ë¼ì´ë”© ìœˆë„ìš°ë¥¼ í™œìš©**í•´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë¶€ë¶„ ë°°ì—´ì„ ë¹ ë¥´ê²Œ íƒìƒ‰í•  ìˆ˜ ìˆë‹¤.

1. **ìœˆë„ìš° í™•ì¥ (ì˜¤ë¥¸ìª½ìœ¼ë¡œ í•œ ì¹¸ì”©)**
   - ìƒˆë¡œìš´ ì›ì†Œë¥¼ ìœˆë„ìš°ì— ì¶”ê°€í•˜ë©´ì„œ, í•´ë‹¹ ìˆ«ìì˜ ìŒ ê°œìˆ˜ë¥¼ ì¦ê°€ì‹œí‚¨ë‹¤.
     - ì´ë•Œ **ìŒì˜ ê°œìˆ˜ëŠ” í˜„ì¬ ê·¸ ìˆ«ìì˜ ë“±ì¥ íšŸìˆ˜ë§Œí¼ ì¦ê°€**í•œë‹¤.
2. **ìœˆë„ìš° ìˆ˜ì¶• (ì™¼ìª½ í¬ì¸í„° ì´ë™)**
   - **í˜„ì¬ ìŒì˜ ê°œìˆ˜ê°€ `k` ì´ìƒ**ì´ ë˜ë©´, ì™¼ìª½ í¬ì¸í„°(`start`)ë¥¼ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì˜®ê¸°ë©° ìœˆë„ìš°ë¥¼ ì¤„ì¸ë‹¤.
     - ì¤„ì´ë©´ì„œ ë‚˜ê°€ëŠ” ìˆ«ìì˜ ë“±ì¥ íšŸìˆ˜ë¥¼ ì¤„ì´ê³ , ê·¸ **ìˆ«ìì— ì˜í•´ ì¤„ì–´ë“œëŠ” ìŒì˜ ê°œìˆ˜ë§Œí¼ `pairCount`ì—ì„œ ë¹¼ì¤€ë‹¤.**
3. **ì¡°ê±´ ë§Œì¡± ì‹œ ê¸°ì—¬ ê³„ì‚°**
   - ì™¼ìª½ í¬ì¸í„° **`start`ëŠ” ì¡°ê±´ì„ ë§‰ ë²—ì–´ë‚˜ëŠ” ì§€ì ê¹Œì§€ ì´ë™**í–ˆê¸° ë•Œë¬¸ì—, **`start` ì´ì „ì˜ ëª¨ë“  ìœ„ì¹˜ì—ì„œ ì‹œì‘í•˜ëŠ” ë¶€ë¶„ ë°°ì—´ì€ ì¡°ê±´ì„ ë§Œì¡±**í•œë‹¤.
   - ë”°ë¼ì„œ, **ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì„œë¸Œë°°ì—´ì˜ ê°œìˆ˜ = `start`**

```typescript showLineNumbers
export function countGood(nums: number[], k: number): number {
  let answer = 0;

  let start = 0;
  let pairCount = 0;
  const counter = new Counter();
  for (const num of nums) {
    pairCount += counter.get(num);
    counter.add(num);
    while (pairCount >= k) {
      counter.sub(nums[start]);
      pairCount -= counter.get(nums[start]);
      start += 1;
    }
    answer += start;
  }
  return answer;
}

class Counter {
  private readonly map: Map<number, number>;
  constructor() {
    this.map = new Map();
  }

  get(num: number): number {
    return this.map.get(num) ?? 0;
  }

  add(num: number): void {
    this.map.set(num, this.get(num) + 1);
  }

  sub(num: number): void {
    this.map.set(num, this.get(num) - 1);
    if (this.get(num) <= 0) {
      this.map.delete(num);
    }
  }
}
```

#### ë³µì¡ë„

- ì‹œê°„ ë³µì¡ë„: $O(n)$
- ê³µê°„ ë³µì¡ë„: $O(n)$
