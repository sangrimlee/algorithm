---
id: '2799'
title: Count Complete Subarrays in an Array
url: https://leetcode.com/problems/count-complete-subarrays-in-an-array
category: Algorithms
difficulty: Medium
tags:
  - Array
  - Hash Table
  - Sliding Window
---

## ë¬¸ì œ ì„¤ëª…

- ì–‘ì˜ ì •ìˆ˜ ë°°ì—´ `nums`ê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤.
- ì´ ë°°ì—´ì˜ ì–´ë–¤ **ë¶€ë¶„ ë°°ì—´(subarray)ê°€** ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´, ê·¸ ë¶€ë¶„ ë°°ì—´ì„ **"ì™„ì „í•œ ë¶€ë¶„ ë°°ì—´(complete subarray)"** ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.
  - í•´ë‹¹ ë¶€ë¶„ ë°°ì—´ ì•ˆì— ìˆëŠ” **ì„œë¡œ ë‹¤ë¥¸(distinct) ì›ì†Œì˜ ê°œìˆ˜ê°€**, ì›ë˜ ì „ì²´ ë°°ì—´ `nums`ì•ˆì— ìˆëŠ” ì„œë¡œ ë‹¤ë¥¸ ì›ì†Œì˜ ê°œìˆ˜ì™€ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤.
- **ì™„ì „í•œ ë¶€ë¶„ ë°°ì—´ì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜**í•´ì•¼ í•©ë‹ˆë‹¤.

## ë¬¸ì œ í’€ì´

### `Hash Table & Sliding Window`

> ğŸ’¡ ì•„ì´ë””ì–´
>
> **ìŠ¬ë¼ì´ë”© ìœˆë„ìš°(Sliding Window)ì™€** **ë¹ˆë„ìˆ˜ ì¹´ìš´í„°(Frequency Counter)ë¥¼ ì‚¬ìš©**í•˜ì—¬, ìœˆë„ìš°ë¥¼ í™•ì¥í•˜ë©°, ì„œë¡œ ë‹¤ë¥¸ ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ì¶”ì í•˜ê³ , ì¡°ê±´ì— ë§ëŠ” ìœˆë„ìš°ê°€ ë‚˜íƒ€ë‚  ë•Œë§ˆë‹¤, ì´ë¥¼ í¬í•¨í•˜ëŠ” ëª¨ë“  ì™„ì „í•œ ë¶€ë¶„ ë°°ì—´ì˜ ê°œìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.

1. **`nums`ì˜ ì„œë¡œ ë‹¤ë¥¸ ì›ì†Œì˜ ê°œìˆ˜ ê³„ì‚°**
   - `Set`ì„ ì‚¬ìš©í•˜ì—¬, `nums`ì˜ ì„œë¡œ ë‹¤ë¥¸ ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. (`distinctCount`)
2. **ìœˆë„ìš° í™•ì¥**
   - `end` í¬ì¸í„°ë¥¼ ë°°ì—´ ì‹œì‘ë¶€í„° ëê¹Œì§€ ì´ë™ì‹œí‚¤ë©´ì„œ **ìœˆë„ìš°ë¥¼ ì˜¤ë¥¸ìª½ìœ¼ë¡œ í™•ì¥**í•˜ê³ , í˜„ì¬ ì›ì†Œ(`nums[end]`)ë¥¼ ì¹´ìš´í„°ì— ì¶”ê°€í•©ë‹ˆë‹¤.
3. **ìœˆë„ìš° ê²€ì‚¬ ë° ê³„ì‚°**
   - í˜„ì¬ ìœˆë„ìš°(`nums[start, ..., end]`)ë‚´ì˜ **ì„œë¡œ ë‹¤ë¥¸ ì›ì†Œì˜ ê°œìˆ˜(`Counter.size`)ê°€ ì „ì²´ ë°°ì—´ì˜ ì„œë¡œ ë‹¤ë¥¸ ì›ì†Œì˜ ê°œìˆ˜(`distinctCount`)ì™€ ê°™ìœ¼ë©´** ë‹¤ìŒ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
   - ì „ì²´ ì™„ì „í•œ ë¶€ë¶„ ë°°ì—´ì˜ ê°œìˆ˜ì— `nums.length - end`ë§Œí¼ ë”í•©ë‹ˆë‹¤.
     - **í˜„ì¬ ë¶€ë¶„ ë°°ì—´ì´ ìœ íš¨í•˜ë‹¤ë©´, ë’¤ì— ìˆëŠ” ëª¨ë“  ìš”ì†Œë¥¼ ì¶”ê°€í•˜ë”ë¼ë„, í•´ë‹¹ ë¶€ë¶„ ë°°ì—´ì„ ìœ íš¨í•©ë‹ˆë‹¤.**
4. **ìœˆë„ìš° ì¶•ì†Œ**
   - ìœˆë„ìš°ê°€ ì™„ì „í•œ ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ë™ì•ˆ, `start`ë¥¼ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™ì‹œí‚¤ê³ , í•´ë‹¹ ì›ì†Œ(`nums[start]`)ë¥¼ ì¹´ìš´í„°ì—ì„œ ì œê±°í•©ë‹ˆë‹¤.
5. **ê²°ê³¼ ë°˜í™˜**
   - ìµœì¢…ì ìœ¼ë¡œ ì™„ì „í•œ ë¶€ë¶„ ë°°ì—´ì˜ ê°œìˆ˜ì— ë”í•©ë‹ˆë‹¤.

```typescript showLineNumbers
export function countCompleteSubarrays(nums: number[]): number {
  const n = nums.length;
  const distinctCount = new Set(nums).size;

  let answer = 0;
  let start = 0;
  const counter = new Counter();
  for (let end = 0; end < n; end++) {
    counter.add(nums[end]);
    while (counter.size === distinctCount) {
      answer += n - end;
      counter.sub(nums[start]);
      start += 1;
    }
  }
  return answer;
}

class Counter {
  private readonly map: Map<number, number>;

  constructor() {
    this.map = new Map();
  }

  get(num: number): number {
    return this.map.get(num) ?? 0;
  }

  add(num: number): void {
    this.map.set(num, this.get(num) + 1);
  }

  sub(num: number): void {
    this.map.set(num, this.get(num) - 1);
    if (this.get(num) <= 0) {
      this.map.delete(num);
    }
  }

  get size(): number {
    return this.map.size;
  }
}
```

#### ë³µì¡ë„

- ì‹œê°„ ë³µì¡ë„: $O(n)$
- ê³µê°„ ë³µì¡ë„: $O(n)$
