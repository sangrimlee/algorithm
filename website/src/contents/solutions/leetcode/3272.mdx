---
id: '3272'
title: Find the Count of Good Integers
url: https://leetcode.com/problems/find-the-count-of-good-integers
category: Algorithms
difficulty: Hard
tags:
  - Hash Table
  - Math
  - Combinatorics
  - Enumeration
---

## ë¬¸ì œ ì„¤ëª…

- ì •ìˆ˜ `n`ê³¼ `k`ê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤.
- **k-palindromic ìˆ˜**ë€ ë‹¤ìŒ ë‘ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì •ìˆ˜ì…ë‹ˆë‹¤.
  - **íŒ°ë¦°ë“œë¡¬(palindrome)**ì´ì–´ì•¼ í•©ë‹ˆë‹¤. (ì•ë’¤ê°€ ê°™ì€ ìˆ˜)
  - `k`ë¡œ ë‚˜ëˆ„ì–´ ë–¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤.
- **ì¢‹ì€(good) ì •ìˆ˜**ë€ ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì •ìˆ˜ì…ë‹ˆë‹¤.
  - í•´ë‹¹ ìˆ˜ì˜ **ìë¦¿ìˆ˜ë¥¼ ì¬ë°°ì—´í•˜ì—¬** **k-palindromic ìˆ˜**ë¡œ ë§Œë“¤ ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
  - **ë‹¨, ì¬ë°°ì—´ ì „ í›„ ëª¨ë‘ ì•ìë¦¬ì— 0ì´ ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.**
- `n`ìë¦¬ ìˆ˜ ì¤‘ì—ì„œ **ì¢‹ì€ ì •ìˆ˜ì˜ ê°œìˆ˜**ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.

## ë¬¸ì œ í’€ì´

### `Enumeration, Permutations and Combinations`

> ğŸ’¡ ì•„ì´ë””ì–´
>
> 1. `k`ë¡œ ë‚˜ëˆ„ì–´ ë–¨ì–´ì§€ëŠ” íŒ°ë¦°ë“œë¡¬ ìˆ˜ë¥¼ ë¨¼ì € ì°¾ëŠ”ë‹¤.
> 2. ê° íŒ°ë¦°ë“œë¡¬ ìˆ˜ì˜ ìë¦¿ìˆ˜ë¥¼ ì •ë ¬í•œ ê²°ê³¼ë¥¼ ê¸°ì¤€ìœ¼ë¡œ **â€œì¢‹ì€ ì •ìˆ˜â€ì˜ í›„ë³´êµ°**ì„ ë§Œë“­ë‹ˆë‹¤.
> 3. í›„ë³´êµ°ì˜ **ìë¦¿ìˆ˜ë¥¼ ì¬ë°°ì—´**í•˜ì—¬ ë§Œë“¤ ìˆ˜ ìˆëŠ” **ëª¨ë“  `n`ìë¦¬ ìˆ˜ì˜ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê³„ì‚°**í•œë‹¤.

1. ìœ íš¨í•œ íŒ°ë¦°ë“œë¡¬ ìˆ˜ ì°¾ê¸°.
   - íŒ°ë¦°ë“œë¡¬ì˜ ì ˆë°˜ë§Œì„ íƒìƒ‰í•˜ê¸° ìœ„í•´, `M**ath.floor(n + 1 / 2)`ìë¦¬ì˜ ìˆ«ìë“¤ì„ ìˆœíšŒ\*\*í•©ë‹ˆë‹¤.
   - `createPalindrome`í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬, **íŒ°ë¦°ë“œë¡¬ ìˆ˜ë¥¼ ìƒì„±**í•©ë‹ˆë‹¤.
   - ìƒì„±ëœ ìˆ˜ê°€ `k`ë¡œ ë‚˜ëˆ„ì–´ ë–¨ì–´ì§€ë©´, **ê·¸ ìˆ˜ì˜ ìë¦¿ìˆ˜ë¥¼ ì •ë ¬í•œ ë¬¸ìì—´ì„ `Set`ì— ì €ì¥**í•©ë‹ˆë‹¤.
     - ì •ë ¬í•˜ëŠ” ì´ìœ ëŠ”, ê° ìë¦¿ìˆ˜ì˜ ê°œìˆ˜ê°€ ê°™ìœ¼ë©´, **ìƒì„±í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜ë„ ë™ì¼**í•˜ê¸° ë•Œë¬¸
2. í›„ë³´êµ° ì¬ë°°ì—´ ê²½ìš°ì˜ ìˆ˜ ê³„ì‚°
   - `Set`ì— ìˆëŠ” ê° ë¬¸ìì—´ì— ëŒ€í•´ **ì¤‘ë³µëœ ì›ì†Œê°€ ìˆëŠ” ìˆœì—´**ì„ ê³„ì‚°í•˜ëŠ” ê³µì‹ì„ ì‚¬ìš©í•˜ì—¬ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
   - ë‹¨, 0ì´ **ë§¨ ì•ì— ì˜¤ëŠ” ê²½ìš°ëŠ” ì „ì²´ ê²½ìš°ì˜ ìˆ˜ì—ì„œ ì œì™¸**í•©ë‹ˆë‹¤.

$$
\text{ì´ ì¡°í•© ìˆ˜} = \frac{(n-c_0)\times(n-1)!}{c_0 ! \times c_1 ! \times \dots \times c_9 !}
$$

3. ê²°ê³¼ ë°˜í™˜
   - ê° í›„ë³´êµ°ì˜ **ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ í•©ì‚°**í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.

```typescript showLineNumbers
export function countGoodIntegers(n: number, k: number): number {
  const set = new Set<string>();
  const base = 10 ** Math.floor((n - 1) / 2);
  const skipLast = n % 2 === 1;

  for (let i = base; i < 10 * base; i++) {
    const palindrome = createPalindrome(i, skipLast);
    const palindromicInteger = Number(palindrome);
    if (palindromicInteger % k === 0) {
      set.add(sortStr(palindrome));
    }
  }

  let answer = 0;
  const factorial = getFactorial(n);
  for (const s of set) {
    const digitCount = countDigit(s);
    answer += countPermutations(n, digitCount, factorial);
  }
  return answer;
}

function createPalindrome(num: number, skipLast: boolean): string {
  const left = num.toString();
  const right = reverseStr(left).substring(skipLast ? 1 : 0);
  return `${left}${right}`;
}

function getFactorial(n: number): bigint[] {
  const factorial = new Array<bigint>(n + 1).fill(1n);
  for (let i = 1; i <= n; i++) {
    factorial[i] = factorial[i - 1] * BigInt(i);
  }
  return factorial;
}

function countDigit(s: string): number[] {
  const digitCount = new Array<number>(10).fill(0);
  for (const digit of s) {
    digitCount[Number(digit)] += 1;
  }
  return digitCount;
}

function countPermutations(n: number, digitCount: number[], factorial: bigint[]): number {
  let totalCount = BigInt(n - digitCount[0]) * factorial[n - 1];
  for (const count of digitCount) {
    totalCount /= factorial[count];
  }
  return Number(totalCount);
}

function reverseStr(s: string): string {
  return s.split('').reverse().join('');
}

function sortStr(s: string): string {
  return s.split('').sort().join('');
}
```

#### ë³µì¡ë„

- $m = \lfloor \frac{n + 1}{2} \rfloor$
- ì‹œê°„ ë³µì¡ë„: $O(n \cdot \log_2n \times 10 ^ m)$
- ê³µê°„ ë³µì¡ë„: $O(n \times 10 ^ m)$
