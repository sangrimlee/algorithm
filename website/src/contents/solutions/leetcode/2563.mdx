---
id: '2563'
title: Count the Number of Fair Pairs
category: Algorithms
difficulty: Medium
tags:
  - Array
  - Two Pointers
  - Binary Search
  - Sorting
url: https://leetcode.com/problems/count-the-number-of-fair-pairs
---

## ë¬¸ì œ ì„¤ëª…

- ì •ìˆ˜ ë°°ì—´ `nums`ì™€ ì •ìˆ˜ `lower`ê³¼ `upper`ê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤.
- **ì˜¬ë°”ë¥¸ ì¸ë±ìŠ¤ ìŒì˜ ê°œìˆ˜**ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.
- **ì˜¬ë°”ë¥¸ ì¸ë±ìŠ¤ ìŒ `(i, j)`ì´ë€?**
  - `0 <= i < j < n`
  - `lower <= nums[i] + nums[j] <= upper`

## ë¬¸ì œ í’€ì´

### `Binary Search`

> ğŸ’¡ ì•„ì´ë””ì–´
>
> ë°°ì—´ì„ ì •ë ¬í•œ ë’¤, ê° ì›ì†Œ nums[i]ì— ëŒ€í•´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” nums[j] (j > i)ì˜ ê°œìˆ˜ë¥¼ ì´ë¶„ íƒìƒ‰ì„ ì‚¬ìš©í•˜ì—¬ ì°¾ìŠµë‹ˆë‹¤.

1. ë°°ì—´ ì •ë ¬
   - `nums`ë¥¼ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•©ë‹ˆë‹¤.
2. **ê° ì›ì†Œ `nums[i]`ì— ëŒ€í•´ ì´ë¶„ íƒìƒ‰ ìˆ˜í–‰**
   - `low`: `nums[j] >= lower - nums[i]`ì¸ ì²« ì¸ë±ìŠ¤
   - `high`: `nums[j] > upper - nums[i]`ì¸ ì²« ì¸ë±ìŠ¤
   - ë²”ìœ„ `(low, high)`ê°€ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìŒì˜ ê°œìˆ˜ê°€ ë©ë‹ˆë‹¤.

```typescript showLineNumbers
function countFairPairs(nums: number[], lower: number, upper: number): number {
  nums.sort((a, b) => a - b);
  const n = nums.length;
  let answer = 0;
  for (let i = 0; i < n; i++) {
    const low = lowerBound(nums, i + 1, n - 1, lower - nums[i]);
    const high = lowerBound(nums, i + 1, n - 1, upper - nums[i] + 1);
    answer += high - low;
  }
  return answer;
}

function lowerBound(nums: number[], low: number, high: number, target: number): number {
  let [start, end] = [low, high];
  while (start <= end) {
    const mid = start + Math.floor((end - start) / 2);
    if (nums[mid] >= target) {
      end = mid - 1;
    } else {
      start = mid + 1;
    }
  }
  return start;
}
```

#### ë³µì¡ë„

- ì‹œê°„ ë³µì¡ë„: $O(n \log n)$
- ê³µê°„ ë³µì¡ë„: $O(n)$
  - `sort`ë©”ì„œë“œì— ëŒ€í•œ ê³µê°„ ë³µì¡ë„ë¥¼ ì œì™¸í•œ ê³µê°„ ë³µì¡ë„: $O(1)$

---

### `Two Pointers`

> ğŸ’¡ ì•„ì´ë””ì–´
>
> ë°°ì—´ì„ ì •ë ¬í•œ ë’¤, ë‘ ìˆ˜ì˜ í•©ì´ íŠ¹ì • `target` ì´í•˜ì¸ ìŒì˜ ê°œìˆ˜ë¥¼ íˆ¬í¬ì¸í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì°¾ìŠµë‹ˆë‹¤.

1. ë°°ì—´ ì •ë ¬
   - `nums`ë¥¼ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•©ë‹ˆë‹¤.
2. **ëˆ„ì  ìŒ ê°œìˆ˜ ê³„ì‚°**
   - `nums[i] + nums[j] â‰¤ upper`ë¥¼ ë§Œì¡±í•˜ëŠ” ìŒì˜ ì´ ê°œìˆ˜ì—ì„œ,
   - `nums[i] + nums[j] < lower`ë¥¼ ë§Œì¡±í•˜ëŠ” ìŒì˜ ê°œìˆ˜ë¥¼ ë¹¼ë©´,
   - ê²°êµ­ `lower â‰¤ nums[i] + nums[j] â‰¤ upper` ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìŒì˜ ê°œìˆ˜ë¥¼ êµ¬í•  ìˆ˜ ìˆë‹¤.
3. **`countPairs`**
   - ì •ë ¬ëœ ë°°ì—´ì—ì„œ `nums[i] + nums[j] â‰¤ target`ì„ ë§Œì¡±í•˜ëŠ” ìŒì˜ ê°œìˆ˜ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ êµ¬í•˜ê¸° ìœ„í•´ **íˆ¬ í¬ì¸í„°(Two Pointers)** ê¸°ë²•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
   - í¬ì¸í„° `start`ë¥¼ ê³ ì •í•œ ìƒíƒœì—ì„œ, `end`ë¥¼ ì›€ì§ì´ë©° **ë‘ ìˆ˜ì˜ í•©ì´ `target` ì´í•˜ì¸ ê²½ìš°, `start`ë¶€í„° `end`ê¹Œì§€ì˜ ëª¨ë“  ì¸ë±ìŠ¤ ìŒì´ ìœ íš¨í•œ ìŒ**ì´ ëœë‹¤.
   - ì´ëŠ” ë°°ì—´ì´ ì •ë ¬ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, `nums[start]`ë³´ë‹¤ í° ê°’ì„ ê°€ì§„ ì¸ë±ìŠ¤ë“¤ê³¼ ë”í•´ë„ ì—¬ì „íˆ `target` ì´í•˜ë¼ëŠ” ê²ƒì´ ë³´ì¥ë©ë‹ˆë‹¤.

```typescript showLineNumbers
function countFairPairs(nums: number[], lower: number, upper: number): number {
  nums.sort((a, b) => a - b);
  return countPairs(nums, upper) - countPairs(nums, lower - 1);
}

/**
 * ì¸ë±ìŠ¤ ìŒì˜ í•©ì´ `target`ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ìŒì˜ ê°œìˆ˜
 */
function countPairs(nums: number[], target: number) {
  let count = 0;
  let [start, end] = [0, nums.length - 1];
  while (start < end) {
    const sum = nums[start] + nums[end];
    if (sum <= target) {
      count += end - start;
      start += 1;
    } else {
      end -= 1;
    }
  }
  return count;
}
```

#### ë³µì¡ë„

- ì‹œê°„ ë³µì¡ë„: $O(n \log n)$
- ê³µê°„ ë³µì¡ë„: $O(n)$
  - `sort`ë©”ì„œë“œì— ëŒ€í•œ ê³µê°„ ë³µì¡ë„ë¥¼ ì œì™¸í•œ ê³µê°„ ë³µì¡ë„: $O(1)$
